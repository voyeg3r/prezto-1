#
# Executes commands at the start of an interactive session.
#
# Authors:
#   Sorin Ionescu <sorin.ionescu@gmail.com>
#   xcv58 <i@xcv58.com>
#

# Source Prezto.
[[ -s "${ZDOTDIR:-$HOME}/.zprezto/init.zsh" ]] && source "${ZDOTDIR:-$HOME}/.zprezto/init.zsh"

# Customize to your needs...
alias l="ls -lh"
alias lsg="ls | grep "
alias lslg="ls -a | grep "
alias lg="ls -lh | grep "

# remove rm -i to avoid useless confirm.
alias rm="nocorrect rm"

# Automatic open
alias -s pdf=open
alias -s txt=vim
alias -s java=vim
alias -s js=vim
alias -s html=vim
alias -s tex=vim
alias -s bib=vim

# for autojump
[[ `uname` == "Linux" && -f /usr/share/autojump/autojump.zsh ]] && source /usr/share/autojump/autojump.zsh
[[ `uname` == "Darwin" && -s $(brew --prefix)/etc/profile.d/autojump.sh ]] && source $(brew --prefix)/etc/profile.d/autojump.sh

# for Mac OS only
[[ -s "${ZDOTDIR:-$HOME}/.zshrc_mac" ]] && source "${ZDOTDIR:-$HOME}/.zshrc_mac"

# for Emacs and EmacsClient
alias ec="emacsclient -n"

export ALTERNATE_EDITOR="vim"

# Path for  groovy
[[ -d /usr/local/opt/groovy/libexec ]] && export GROOVY_HOME=/usr/local/opt/groovy/libexec

# Path for /usr/local/bin
export PATH=/usr/local/bin:${PATH}

# add current directory to PATH
export PATH=.:${PATH}

# Path for bins
export PATH=${PATH}:/usr/bin:/bin:/usr/sbin:/sbin:/usr/texbin

# Path for Android
[[ -d ~/Library/SDK-Android ]] && {
    export ANDROID_HOME=~/Library/SDK-Android
    export PATH=${PATH}:${ANDROID_HOME}
    export PATH=${PATH}:${ANDROID_HOME}/platform-tools
}

# for GoPath
[[ -d /usr/local/opt/go/libexec/bin ]] && export GOPATH=/usr/local/opt/go/libexec/bin

# HADOOP related variables and Path
[[ -d ~/hadoop ]] && {
    export HADOOP_INSTALL=~/hadoop
    export HADOOP_HOME=$HADOOP_INSTALL
    export PATH=${PATH}:$HADOOP_INSTALL/bin:$HADOOP_INSTALL/sbin
    export HADOOP_MAPRED_HOME=$HADOOP_INSTALL
    export HADOOP_COMMON_HOME=$HADOOP_INSTALL
    export HADOOP_HDFS_HOME=$HADOOP_INSTALL
    export YARN_HOME=$HADOOP_INSTALL
}

# For sed error: illegal byte sequence. via http://stackoverflow.com/questions/19242275/re-error-illegal-byte-sequence-on-mac-os-x
export LC_CTYPE=C
export LANG=C

# Fix jekyll "invalid byte sequence in US-ASCII" error
export LC_ALL=en_US.UTF-8
export LANG=en_US.UTF-8

# for emacs term
if [[ -n ${INSIDE_EMACS} ]]; then
        # This shell runs inside an Emacs *shell*/*term* buffer.
        prompt walters
        unsetopt zle
fi

# Path for RVM
[[ -d $HOME/.rvm/bin ]] && PATH=${PATH}:$HOME/.rvm/bin # Add RVM to PATH for scripting

# alias for hadoop
command -v hadoop >/dev/null 2>&1 && {
    alias hfs="hadoop fs "
    alias hfls="hadoop fs -ls"
    alias hfrm="hadoop fs -rm"
    alias hfcat="hadoop fs -cat"
    alias hjar="hadoop jar"
}

# alias for git
command -v git >/dev/null 2>&1 && {
    alias gph="git push github"
    alias gss="git status -s"
    alias gcma="git commit -am"
    alias gcmm="git commit -m"
    alias gpll="git pull github"
    alias gpllo="git pull origin"
    alias gdiff="git --no-pager diff"
    alias glog="git --no-pager log"
    alias gck="git checkout"
    alias grsh="git reset --hard"
    alias grss="git reset --soft"
}

# alias for Android develop
command -v adb >/dev/null 2>&1 && {
    alias ashell="adb shell"
    alias alog="adb logcat"
    alias alc="adb logcat -c"
    alias als="adb logcat -s"
    alias ainstall="adb install -r"
    alias auninstall="adb uninstall"
    alias apull="adb pull"
    alias areboot="adb reboot"
    alias aflashall="fastboot flashall -w"
    alias aflash="fastboot flashall"
}

# for OS161 CSE 521
[[ -d ~/root && -d ~/os161 && -d ~/src ]] && {
    alias db="cd ~/root && mips-harvard-os161-gdb kernel"
    export PATH=${PATH}:~/os161/tools/bin
}

# Vi Mode
[[ -s "${ZDOTDIR:-$HOME}/.zshrc_vimode" ]] && source "${ZDOTDIR:-$HOME}/.zshrc_vimode"

# local config
[[ -s "${ZDOTDIR:-$HOME}/.zshrc_local" ]] && source "${ZDOTDIR:-$HOME}/.zshrc_local"
